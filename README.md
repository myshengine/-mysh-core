# Mysh

[![npm version](https://img.shields.io/npm/v/myshengine-core)](https://www.npmjs.com/package/myshengine-core)
[![License: MIT](https://img.shields.io/badge/license-MIT-green.svg)](LICENSE)
[![Build Status](https://img.shields.io/badge/build-passing-brightgreen)](#)
[![TypeScript](https://img.shields.io/badge/TypeScript-Strict-blue)](#)

> üß† ECS-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –Ω–∞ TypeScript –¥–ª—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ —á–∏—Å—Ç—ã—Ö –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º—ã—Ö –∏–≥—Ä.

---

## üìñ –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ

- [–í–≤–µ–¥–µ–Ω–∏–µ](#–≤–≤–µ–¥–µ–Ω–∏–µ)
- [–£—Å—Ç–∞–Ω–æ–≤–∫–∞](#—É—Å—Ç–∞–Ω–æ–≤–∫–∞)
- [–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç](#–±—ã—Å—Ç—Ä—ã–π-—Å—Ç–∞—Ä—Ç)
- [–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Mysh](#-–∫–æ–≥–¥–∞-–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å-mysh)
- [–ù–µ –ø–æ–¥—Ö–æ–¥–∏—Ç, –µ—Å–ª–∏...](#-–Ω–µ-–ø–æ–¥—Ö–æ–¥–∏—Ç-–µ—Å–ª–∏)
- [–û—Å–Ω–æ–≤—ã –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã ECS](#–æ—Å–Ω–æ–≤—ã-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã-ecs)
    - [Entity](#entity)
    - [Component](#component)
    - [System](#system)
- [–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ—Ç–æ–∫–æ–º (Flow)](#—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ-–ø–æ—Ç–æ–∫–æ–º-flow)
- [–ì—Ä—É–ø–ø—ã —Å–∏—Å—Ç–µ–º (SystemGroup)](#–≥—Ä—É–ø–ø—ã-—Å–∏—Å—Ç–µ–º-systemgroup)
- [–°–æ—Å—Ç–æ—è–Ω–∏—è (FSM)](#—Å–æ—Å—Ç–æ—è–Ω–∏—è-fsm)
- [–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏](#–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ-–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏)
    - [–°–µ—Ä–≤–∏—Å—ã](#—Å–µ—Ä–≤–∏—Å—ã)
    - [Store](#store)
- [–õ–∏—Ü–µ–Ω–∑–∏—è](#–ª–∏—Ü–µ–Ω–∑–∏—è)

---

## üß† –í–≤–µ–¥–µ–Ω–∏–µ

**Mysh** ‚Äî —ç—Ç–æ ECS-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫ (Entity Component System) –Ω–∞ TypeScript, —Å–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –¥–ª—è –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ–π, –º–æ–¥—É–ª—å–Ω–æ–π –∏ –ª–µ–≥–∫–æ —Ç–µ—Å—Ç–∏—Ä—É–µ–º–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã. –û–Ω –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏—Ö –∏–ª–∏ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–æ–≤—ã—Ö —Ä–µ—à–µ–Ω–∏–π, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫—É –ø–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π –∏ –ª–æ–≥–∏–∫–æ–π –∏–≥—Ä—ã.

---

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
npm install myshengine-core
```

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

–î–ª—è –∑–∞–ø—É—Å–∫–∞ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å–æ–∑–¥–∞—Ç—å —ç–∫–∑–µ–º–ø–ª—è—Ä MyshApp, –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –µ–≥–æ –∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –ø—Ä–æ—Å–ª—É—à–∫—É —Å–æ–±—ã—Ç–∏–π:

```ts
const handlers: ISignalConfig[] = [
    {
        signal: OnUpdateSignal,
        executions: [{ group: OnUpdateGroup }],
    },
];

const mysh = new MyshApp();
mysh.init();
mysh.listen(handlers);
```

---

## üß≠ –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Mysh

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Mysh, –µ—Å–ª–∏ –≤—ã:

- –°—Ç—Ä–æ–∏—Ç–µ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É —Å –Ω–∏–∑–∫–æ–π —Å–≤—è–∑–∞–Ω–Ω–æ—Å—Ç—å—é
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç–µ —Ä–µ–Ω–¥–µ—Ä–µ—Ä (PixiJS, Cocos, WebGL –∏ –ø—Ä.) –∏ —Ö–æ—Ç–∏—Ç–µ ECS-—è–¥—Ä–æ
- –ü—Ä–µ–¥–ø–æ—á–∏—Ç–∞–µ—Ç–µ event-driven –∏–ª–∏ –≥–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–¥—Ö–æ–¥
- –•–æ—Ç–∏—Ç–µ –∏–∑–æ–ª–∏—Ä–æ–≤–∞—Ç—å –∏–≥—Ä–æ–≤—É—é –ª–æ–≥–∏–∫—É –æ—Ç —Ä–µ–Ω–¥–µ—Ä–∞
- –†–∞–±–æ—Ç–∞–µ—Ç–µ —Å FSM, DI –∏ Store
- –†–∞–∑—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç–µ –¥–≤–∏–∂–æ–∫ –∏–ª–∏ —Ä–∞—Å—à–∏—Ä—è–µ–º—ã–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫

---

## üö´ –ù–µ –ø–æ–¥—Ö–æ–¥–∏—Ç, –µ—Å–ª–∏...

Mysh **–Ω–µ –ø–æ–¥–æ–π–¥—ë—Ç**, –µ—Å–ª–∏ –≤—ã:

- –û–∂–∏–¥–∞–µ—Ç–µ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –¥–≤–∏–∂–æ–∫ —Å –≥—Ä–∞—Ñ–∏–∫–æ–π –∏ UI
- –•–æ—Ç–∏—Ç–µ –≤–∏–∑—É–∞–ª—å–Ω—É—é —Å—Ä–µ–¥—É —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- –ù–µ –∑–Ω–∞–∫–æ–º—ã —Å ECS –∏–ª–∏ DI
- –ò—â–µ—Ç–µ –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ —Å –∞—Å—Å–µ—Ç-–º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç–æ–º –∏ –∞–Ω–∏–º–∞—Ü–∏–µ–π

---

## üß± –û—Å–Ω–æ–≤—ã –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã ECS

### Entity

Entity ‚Äî –ª–æ–≥–∏—á–µ—Å–∫–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –∏–≥—Ä–æ–≤–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞. –û–Ω–æ —Å–æ–¥–µ—Ä–∂–∏—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç API –¥–ª—è –∏—Ö —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è.

```ts
const entity = new Entity('player');
entity.addComponent(new HealthComponent());
entity.removeComponent(HealthComponent);
entity.hasComponents([HealthComponent]);
```

---

### Component

–í –∫–∞—á–µ—Å—Ç–≤–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –º–æ–∂–µ—Ç –≤—ã—Å—Ç—É–ø–∞—Ç—å –ª—é–±–æ–π –∫–ª–∞—Å—Å. –≠—Ç–æ –º–æ–≥—É—Ç –±—ã—Ç—å –∫–∞–∫ –ø—Ä–æ—Å—Ç—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö, —Ç–∞–∫ –∏ –∫–ª–∞—Å—Å—ã —Å –ª–æ–≥–∏–∫–æ–π (–µ—Å–ª–∏ —ç—Ç–æ –æ–ø—Ä–∞–≤–¥–∞–Ω–æ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ).

```ts
class HealthComponent {
    public value = 100;
}
```

---

### System

–°–∏—Å—Ç–µ–º—ã —Ä–µ–∞–ª–∏–∑—É—é—Ç –∏–≥—Ä–æ–≤—É—é –ª–æ–≥–∏–∫—É. –û–Ω–∏ –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã –¥—Ä—É–≥ –æ—Ç –¥—Ä—É–≥–∞ –∏ —Ä–∞–±–æ—Ç–∞—é—Ç —Å —Å—É—â–Ω–æ—Å—Ç—è–º–∏, –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –ø–æ –Ω—É–∂–Ω—ã–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º.

```ts
class DamageSystem extends System {
    public execute(): void {
        const entities = this.filter({ includes: [HealthComponent] });

        entities.forEach((entity) => {
            const health = entity.getComponent(HealthComponent);
            health.value -= 10;
        });
    }
}
```

---

## üîÑ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ—Ç–æ–∫–æ–º (Flow)

Mysh –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –¥–≤–∞ –ø–æ–¥—Ö–æ–¥–∞:

- **Update-driven**: –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º –∫–∞–∂–¥—ã–π –∫–∞–¥—Ä (–≤ Update Loop).
- **Event-driven**: —Å–∏—Å—Ç–µ–º—ã –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏, —Ä–µ–∞–≥–∏—Ä—É—è –Ω–∞ —Å–æ–±—ã—Ç–∏—è.

–û–±–∞ –ø–æ–¥—Ö–æ–¥–∞ –º–æ–∂–Ω–æ —Å–≤–æ–±–æ–¥–Ω–æ –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞—Ç—å –≤ —Ä–∞–º–∫–∞—Ö –æ–¥–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞.

---

## üìö –ì—Ä—É–ø–ø—ã —Å–∏—Å—Ç–µ–º (SystemGroup)

–ì—Ä—É–ø–ø—ã —Å–∏—Å—Ç–µ–º –ø–æ–∑–≤–æ–ª—è—é—Ç –∑–∞–¥–∞—Ç—å —Ç–æ—á–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ –∏—Ö –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è.

```ts
class GameLoopGroup extends SystemGroup {
    public setup(): IGroupOption[] {
        return [
            { instance: this.provide(InputSystem, null) },
            { instance: this.provide(PhysicsSystem, null) },
            { instance: this.provide(RenderSystem, null) },
        ];
    }
}
```

---

## üß† –°–æ—Å—Ç–æ—è–Ω–∏—è (FSM)

FSM –≤ Mysh ‚Äî —ç—Ç–æ –º–æ—â–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏–≥—Ä–æ–≤—ã–º –ø–æ—Ç–æ–∫–æ–º. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è –≤–ª–æ–∂–µ–Ω–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è, –ø–µ—Ä–µ—Ö–æ–¥—ã —Å –ø—Ä–æ–≤–µ—Ä–∫–∞–º–∏, –≥–ª–æ–±–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ (Store), —Å–æ–±—ã—Ç–∏—è –≤—Ö–æ–¥–∞/–≤—ã—Ö–æ–¥–∞ –∏ –º–Ω–æ–≥–æ–µ –¥—Ä—É–≥–æ–µ.

```ts
const fsm = new FSM({
    name: 'mainFlow',
    initialState: 'boot',
    states: [
        {
            name: 'boot',
            transitions: { init: 'loading' },
            onEnter: [BootGroup],
        },
        {
            name: 'loading',
            transitions: { done: 'play' },
            onEnter: [LoadAssetsGroup],
        },
        {
            name: 'play',
            transitions: { error: 'error' },
        },
    ],
});
```

---

## üõ† –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### –°–µ—Ä–≤–∏—Å—ã

–°–µ—Ä–≤–∏—Å—ã ‚Äî —ç—Ç–æ –∫–ª–∞—Å—Å—ã —Å –æ–±—â–µ–π –ª–æ–≥–∏–∫–æ–π, –¥–æ—Å—Ç—É–ø–Ω—ã–µ –≤–æ –≤—Å–µ—Ö —Å–∏—Å—Ç–µ–º–∞—Ö –∏ –≥—Ä—É–ø–ø–∞—Ö —á–µ—Ä–µ–∑ Dependency Injection.

```ts
class LoggerService {
    log(msg: string) {
        console.log(msg);
    }
}

const LOGGER = Symbol('LOGGER');

class MySystem extends System {
    @Inject(LOGGER) private logger!: LoggerService;

    public execute() {
        this.logger.log('System executed');
    }
}
```

```ts
class MyGroup extends SystemGroup {
    public setupDependencies(): Provider[] {
        return [{ provide: LOGGER, useClass: LoggerService }];
    }
}
```

---

### Store

Store ‚Äî –≥–ª–æ–±–∞–ª—å–Ω–æ–µ –∏–º–º—É—Ç–∞–±–µ–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –¥–∞–Ω–Ω—ã—Ö, –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ–º–æ–µ –≤ FSM –∏ –°–∏—Å—Ç–µ–º—ã.

```ts
const store = new Store<{ score: number }>({ score: 0 });

store.setState((state) => ({
    score: state.score + 10,
}));
```

---

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

[MIT License](LICENSE) ¬© 2025 Daniil Stolpnik
